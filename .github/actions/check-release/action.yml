name: "Check Release"
description: "Run through a dry run release cycle"
inputs:
  token:
    description: "GitHub access token"
    required: true
  version_spec:
    description: "New Version Specifier"
    required: false
    default: ""
runs:
  using: "composite"
  steps:
    - name: install-releaser
      uses: ./.gitub/actions/install-releaser

    - name: draft-changelog
      uses: ./.gitub/actions/draft-changelog
      env:
        RH_IS_CHECK_RELEASE: "true"
      with:
        dry_run: true
        token: ${{ inputs.token }}
        version_spec: ${{ inputs.version_spec }}

    - name: draft-release
      uses: ./.gitub/actions/draft-release
      env:
        RH_IS_CHECK_RELEASE: "true"
      with:
        dry_run: true
        token: ${{ inputs.token }}
        version_spec: ${{ inputs.version_spec }}
        release_url: ${{ steps.draft-changelog.outputs.release_url }}

    - name: publish-release
      uses: ./.gitub/actions/publish-release
      env:
        RH_IS_CHECK_RELEASE: "true"
      with:
        dry_run: true
        token: ${{ inputs.token }}
        release_url: ${{ steps.draft-changelog.outputs.release_url }}
